"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const e = require("react/jsx-runtime"), r = require("react"), i = require("react-router-dom"), t = require("@mui/material"), a = require("validator"), s = require("@mui/icons-material/Email.js"), o = require("@mui/icons-material/Visibility.js"), n = require("@mui/icons-material/VisibilityOff.js"), l = require("i18next"), u = require("../main.cjs");
require("react-dom/client"), require("axios"), require("react-i18next"), require("@mui/icons-material/Search.js"), require("@mui/icons-material/Close.js"), require("i18next-browser-languagedetector"), require("i18next-http-backend"), require("js-cookie"), require("styled-components"), require("lodash.debounce"), require("@mui/material/useMediaQuery/index.js"), require("@mui/icons-material/ArrowDropUp.js"), require("@mui/icons-material/ArrowDropDown.js"), require("@mui/icons-material/Menu.js"), require("@mui/icons-material/AccountCircle.js"), require("@mui/icons-material/ShoppingCart.js"), require("@mui/icons-material/FavoriteBorder.js"), require("@mui/icons-material/Phone.js"), require("@mui/icons-material/MoreVert.js"), require("@mui/material/useScrollTrigger/index.js"), require("@mui/icons-material/Facebook.js"), require("@mui/icons-material/WhatsApp.js"), require("@mui/icons-material/Telegram.js"), require("@mui/icons-material/Call.js"), require("@mui/material/styles/index.js"), require("@mui/material/CssBaseline/index.js"), require("@mui/icons-material"), require("@mui/material/CircularProgress/index.js"), require("@mui/material/Box/index.js"), exports.default = function() {
  const [c, m] = r.useState(""), [d, x] = r.useState(""), [p, j] = r.useState(""), [h, g] = r.useState(""), q = i.useNavigate(), [y, f] = r.useState(false), { setIsLoggedIn: b } = r.useContext(u.AuthContext), v = (e2) => new Promise((r2) => setTimeout(r2, e2));
  return e.jsxs(t.Box, { sx: { maxWidth: 400, margin: "auto", mt: 5, p: 3, border: "1px solid #ccc", borderRadius: 4 }, children: [e.jsx(t.Typography, { variant: "h4", component: "h1", gutterBottom: true, children: l.t("login_title") }), e.jsxs("form", { onSubmit: async (e2) => {
    e2.preventDefault(), c && d ? a.isEmail(c) ? await (async () => {
      const e3 = { email: c, password: d };
      try {
        const r2 = await fetch("https://fanaristore.sama-tek.com/api/customer-login", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(e3) });
        if (r2.ok) {
          const e4 = await r2.json();
          console.log("بيانات الاستجابة:", e4), document.cookie = `accessToken=${e4[0].token}; max-age=6600; path=/`, g(l.t("login_success")), b(true), q("/");
        } else j(l.t("login_failed")), await v(3e3), j("");
      } catch (e4) {
        j(l.t("login_failed")), console.error("حدث خطأ أثناء المصادقة:", e4);
      }
    })() : j(l.t("invalid_email")) : j(l.t("fill_all_fields"));
  }, children: [e.jsxs(t.Grid, { container: true, spacing: 2, alignItems: "center", children: [e.jsxs(t.Grid, { item: true, xs: 12, children: [e.jsxs(t.Typography, { variant: "subtitle1", sx: { display: "flex", alignItems: "center" }, children: [l.t("email"), " ", e.jsx(t.Typography, { sx: { color: "red", ml: 0.5 }, children: "*" })] }), e.jsx(t.TextField, { name: "email", fullWidth: true, margin: "normal", value: c, onChange: (e2) => m(e2.target.value), InputProps: { startAdornment: e.jsx(t.IconButton, { children: e.jsx(s, {}) }) } })] }), e.jsxs(t.Grid, { item: true, xs: 12, children: [e.jsxs(t.Typography, { variant: "subtitle1", sx: { display: "flex", alignItems: "center" }, children: [l.t("password"), " ", e.jsx(t.Typography, { sx: { color: "red", ml: 0.5 }, children: " *" })] }), e.jsx(t.TextField, { type: y ? "text" : "password", fullWidth: true, margin: "normal", value: d, onChange: (e2) => x(e2.target.value), InputProps: { startAdornment: e.jsx(t.IconButton, { onClick: () => f(!y), children: y ? e.jsx(o, {}) : e.jsx(n, {}) }) } })] })] }), p && e.jsx(t.Typography, { sx: { mt: "20px" }, variant: "body2", color: "error", children: p }), h && e.jsx(t.Typography, { sx: { mt: "20px" }, variant: "body2", color: "primary", children: h }), e.jsxs(t.Button, { type: "submit", variant: "contained", color: "primary", fullWidth: true, sx: { mt: 2 }, children: [" ", l.t("login")] })] }), e.jsxs(t.Typography, { variant: "body2", align: "center", sx: { mt: 2 }, children: [l.t("dont_have_account"), " ", e.jsx(t.Link, { href: "/register", children: l.t("go_regestier") }), "."] })] });
};
